covid_certificate -- Generate certificate required to leave domicile in France during Covid confinement
=======================================================================================================

France is under total confinement during the Covid-19 crisis. All residents
are required to bear a certificate when leaving their place of confinement,
with a (very) limited number of cases where this is allowed. For the first
three weeks of confinement, this certificate had to be printed or hand-written.
A digital version of the certificate (QR code) can now be generated using a
web service run by the authorities (with a strong message that all data
collected by the web service remains on the user's terminal and no information
is collected by the authorities in the process).

The web service requires the user to key in personal information (fist name,
last name, birth date, birth place, address of residence) every time a
certificate is to be generated. This applet (which runs under Pythonista, on
iOS) provides a convenient alternative to the official service:

- Personal details for yourself and all the persons you are confined with need
  only be keyed in once, in file `persons.json`, in the same directory as
  this script.

- When run, the applet displays a list of persons for whom a certificate can be
  generated.

- When a person is selected, an email is prepared, with the PDF file for the
  certificate attached, and you only have to press the send button.


Getting Started
---------------

Download Pythonista from the App Store.

Install Stash -- See https://github.com/ywangd/stash

Run the following commands in Stash, to install dependencies:

    pip install dataclasses
    pip install pdfrw

In the Pythonista root, create directory `covid_certificate`.

Download the following files from repo https://github.com/TPO-POMGOM/Pythonista-utilities,
into directory `covid_certificate`:

- busy_view.py

- mail_compose.py

Download the following files from repo https://github.com/TPO-POMGOM/XXX,
into directory `covid_certificate`:

- attestation-deplacement-fr.pdf

- covid_certificate.py

- persons_example.json

Rename `persons_example.json` to `persons.json` and customise its contents.

Run `covid_certificate.py`


Disclaimers
-----------

In all cases I have tested, the information contained in the PDF file and the
QR code generated by this applet is the same as the information contrained in
the PDF file and the QR code generated by the official site. However, I
cannot guarantee this is true in all cases, or that the information generated
by the official site will not change without warning -- Use at your own risk.

The objective of this applet is to facilitate the generation of certificates,
not to work around the rules of confinement -- Use in a responsible way.