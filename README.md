Generate certificate required to leave home during Covid confinement in France
==============================================================================

As part of the management of the Covid-19 pandemic in France, the population
may be confined at home for some weeks when the situation becomes critical.
During these periods, residents can leave their place of confinement only in
a (very) limited number of cases and are then required to bear a certificate
indicating their place of residence, the reason why they are leaving it, and
the time they are leaving it. This certificate may be hand-written, printed on
paper, or take the form of a PDF file and QR code generated by a web service
run by the authorities.

The web service requires the user to key in personal information (fist name,
last name, birth date, birth place, address of residence) every time a
certificate is to be generated.

This applet (which runs under Pythonista, on iOS) provides a convenient
alternative to the official service:

- Personal details for yourself and all the persons you are confined with need
  only be keyed in once, in file `persons.json`, in the same directory as
  the applet.

- When run, the applet displays a list of persons for whom a certificate can be
  generated.

![UI](TPO-POMGOM.github.com/covid_certificate/Screenshot 1 - UI.png)

- When a person is selected, an email is prepared, with the PDF file for the
  certificate attached, and you only have to press the send button.

![Mail](TPO-POMGOM.github.com/covid_certificate/Screenshot 2 - Mail.png)


Getting Started
---------------

Download Pythonista from the App Store https://apps.apple.com/us/app/pythonista-3/id1085978097.

Install Stash https://github.com/ywangd/stash.

Run the following commands in Stash, to install dependencies:

    pip install dataclasses
    pip install pdfrw

In the Pythonista root, create directory `covid_certificate`.

Download the following files (*) from repo https://github.com/TPO-POMGOM/Pythonista-utilities,
into directory `covid_certificate`:

- `busy_view.py`

- `mail_compose.py`

Download the following files (*) from repo https://github.com/TPO-POMGOM/covid_certificate,
into directory `covid_certificate`:

- `attestation-deplacement-fr.pdf`

- `covid_certificate.py`

- `persons_example.json`

Rename `persons_example.json` to `persons.json` and customise its contents.

Run `covid_certificate.py`

(*) for instance, using jsbain's GitHubGet https://github.com/jsbain/GitHubGet/blob/master/GitHubGet.py


Disclaimers
-----------

In all cases tested, this applet generates the same output (PDF file and
QR code) as the official site. However, no guarantee is provided that there
are no cases where the two differ. Furthermore, the output generated by the
official site might change without warning in the future, in which case
the applet would no longer generate the same output, until it is updated -
Use at your own risk.

The objective of this applet is to facilitate the generation of certificates,
not to work around the rules of confinement - Use in a responsible way.